"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;e.style.display=n="none"===n?"block":n;n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e,s=document.querySelector(".burger"),i=document.querySelector(".header"),a=document.querySelectorAll(".technology-card"),t=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),n=document.querySelectorAll(".tabs__trigger"),o=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),l=document.querySelector(".treatments .dropdown"),c=document.querySelector(".treatments .dropdown__list"),r=_createForOfIteratorHelper(document.querySelectorAll(".header-contacts__link"));try{for(r.s();!(e=r.n()).done;)e.value.addEventListener("click",d)}catch(e){r.e(e)}finally{r.f()}function d(e){e.preventDefault();e=this.getAttribute("href"),e=document.querySelector(e).offsetTop;scroll({top:e-100,behavior:"smooth"})}window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(i.classList.add("js-scroll-down"),i.classList.remove("js-scroll-top")):(i.classList.add("js-scroll-top"),i.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var p=0;p<n.length;p++)!function(e){n[e].addEventListener("click",function(){t.forEach(function(e){e.classList.remove("js-active")}),n.forEach(function(e){e.classList.remove("js-active")}),t[e].classList.add("js-active"),n[e].classList.add("js-active"),o.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(p);o&&(o.textContent=document.querySelector(".tabs__trigger.js-active").textContent),OverlayScrollbars(document.querySelectorAll(".tooth"),{});var u,y,f,v=document.querySelector(".files__table"),m=new DataTransfer;$("#file").on("change",function(e){for(var t=0;t<this.files.length;t++){var n=$("<div/>",{class:"files__wrapper"});$("<files-item/>",{class:"name",text:this.files.item(t).name});n.append('<div class="files-item"><i class="icon-file"></i><span class="files-item__name">'.concat(this.files.item(t).name,'</span><i class="files-item__remove icon-trash-can"></i><div><div>')),$(".files__table").append(n)}var o,r=_createForOfIteratorHelper(this.files);try{for(r.s();!(o=r.n()).done;){var s=o.value;m.items.add(s)}}catch(e){r.e(e)}finally{r.f()}this.files=m.files,0<=this.files.length?v.style.display="flex":v.style.display="none",$(".files-item__remove").click(function(){var e=$(this).parent().find(".files-item__name").text();$(this).parents(".files__wrapper").remove();for(var t=0;t<m.items.length;t++)e!==m.items[t].getAsFile().name||m.items.remove(t);document.getElementById("file").files=m.files})}),window.matchMedia("(min-width: 992px)").matches?(s.addEventListener("click",function(){i.classList.contains("js-nav-open")?(i.classList.remove("js-nav-open"),i.classList.add("js-nav-close")):(i.classList.add("js-nav-open"),i.classList.remove("js-nav-close"))}),$(".technology__wrapper").click(function(){$(".technology__wrapper").not($(this).closest(".technology__wrapper")).removeClass("js-active"),$(this).closest(".technology__wrapper").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),document.querySelector(".horizontal-scroll")&&(gsap.registerPlugin(ScrollTrigger),u=gsap.utils.toArray(".horizontal-scroll"),y=0,(f=function(){y=0,u.forEach(function(e){y+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",f),f=document.querySelector(".treatments"),gsap.to(u,{x:function(){return"-".concat(y-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:f,pin:!0,scrub:!0,end:function(){return"+=".concat(y)},invalidateOnRefresh:!0}}),u.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(y/(y-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(y/(y-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}))):function(){for(var e,t=document.querySelectorAll(".show__trigger"),n=document.querySelectorAll(".show__item"),o=0;o<t.length;o++)!function(e){t[e].addEventListener("click",function(){t[e].classList.toggle("js-active"),t[e].classList.contains("js-active")?(t[e].textContent="See less",n.forEach(function(e){e.style.display="block"})):(t[e].textContent="See all",n.forEach(function(e){e.style.display="none"}))})}(o);l&&c&&(e=document.querySelector(".dropdown__list").offsetHeight,document.documentElement.style.setProperty("--treatments-dropdown-offset",e+"px"),window.addEventListener("scroll",function(){window.scrollY>e+64?(l.classList.add("js-scroll-down"),c.style.display="none",document.querySelector(".treatments").classList.add("offset-top")):(l.classList.remove("js-scroll-down"),c.style.display="block",document.querySelector(".treatments").classList.remove("offset-top"))}),l.addEventListener("click",function(){l.classList.contains("js-scroll-down")&&slideToggle(c,300)})),s.addEventListener("click",function(){i.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var r=0;r<a.length;r++)!function(e){a[e].addEventListener("click",function(){a.forEach(function(e){e.classList.remove("js-active")}),a[e].classList.add("js-active")})}(r);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}();new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:5}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var n=t.next("div.select__styled");n.append('<span></span><i class="icon-arrow-dropdown"></i>'),n.find("span").text(t.children("option").eq(0).text());for(var o=$("<ul />",{class:"select__options"}).insertAfter(n),r=0;r<e;r++)$("<li />",{text:t.children("option").eq(r).text(),rel:t.children("option").eq(r).val()}).appendTo(o);var s=o.children("li");n.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),s.click(function(e){e.stopPropagation(),n.find("span").text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),o.slideUp(300)}),$(document).click(function(){n.removeClass("active"),o.slideUp(300)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiXSwibmFtZXMiOlsic2xpZGVVcCIsInRhcmdldCIsImR1cmF0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic3R5bGUiLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJvdmVyZmxvdyIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwid2luZG93Iiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJyZW1vdmVQcm9wZXJ0eSIsInNsaWRlRG93biIsImdldENvbXB1dGVkU3R5bGUiLCJzbGlkZVRvZ2dsZSIsIm9ubG9hZCIsIl9zdGVwIiwiYnVyZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwidGVjaG5vbG9neUNhcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFiQ29udGVudCIsInRhYkl0ZW0iLCJ0YWJEcm9wZG93blRyaWdnZXIiLCJ0cmVhdG1lbnRzRHJvcGRvd24iLCJ0cmVhdG1lbnRzRHJvcGRvd25MaXN0IiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGlja0hhbmRsZXIiLCJlcnIiLCJlIiwiZiIsInByZXZlbnREZWZhdWx0IiwiaHJlZiIsInRoaXMiLCJnZXRBdHRyaWJ1dGUiLCJvZmZzZXRUb3AiLCJzY3JvbGwiLCJ0b3AiLCJiZWhhdmlvciIsIiQiLCJzY3JvbGxUb3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpIiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZXh0Q29udGVudCIsIl9sb29wIiwiT3ZlcmxheVNjcm9sbGJhcnMiLCJzZWN0aW9ucyIsIm1heFdpZHRoIiwidHJpZ2dlckl0ZW0iLCJmaWxlc1RhYmxlIiwiZHQiLCJEYXRhVHJhbnNmZXIiLCJvbiIsImZpbGVzIiwiZmlsZUJsb2MiLCJjbGFzcyIsInRleHQiLCJuYW1lIiwiYXBwZW5kIiwiY29uY2F0IiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImZpbGUiLCJpdGVtcyIsImNsaWNrIiwicGFyZW50IiwiZmluZCIsInBhcmVudHMiLCJnZXRBc0ZpbGUiLCJnZXRFbGVtZW50QnlJZCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJub3QiLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwiZ3NhcCIsInJlZ2lzdGVyUGx1Z2luIiwiU2Nyb2xsVHJpZ2dlciIsInV0aWxzIiwidG9BcnJheSIsImdldE1heFdpZHRoIiwic2VjdGlvbiIsIm9mZnNldFdpZHRoIiwidG8iLCJ4IiwiaW5uZXJXaWR0aCIsImVhc2UiLCJzY3JvbGxUcmlnZ2VyIiwic3RhcnQiLCJ0cmlnZ2VyIiwicGluIiwic2NydWIiLCJlbmQiLCJpbnZhbGlkYXRlT25SZWZyZXNoIiwic2N0IiwiY3JlYXRlIiwib2Zmc2V0TGVmdCIsInRvZ2dsZUNsYXNzIiwidGFyZ2V0cyIsImNsYXNzTmFtZSIsIm9mZnNldEl0ZW0iLCJzaG93VHJpZ2dlciIsInNob3dJdGVtIiwidG9nZ2xlIiwiZWxlbWVudCIsIl9sb29wMiIsImRvY3VtZW50RWxlbWVudCIsInNldFByb3BlcnR5Iiwic2Nyb2xsWSIsImJvZHkiLCJfbG9vcDMiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImJyZWFrcG9pbnRzIiwiNzY4IiwibG9vcCIsIjk5MiIsImNlbnRlcmVkU2xpZGVzIiwidGV4dGFyZWEiLCJhdXRvc2l6ZVRleHRhcmVhIiwiY3NzVGV4dCIsInNjcm9sbEhlaWdodCIsImVhY2giLCIkdGhpcyIsIm51bWJlck9mT3B0aW9ucyIsImNoaWxkcmVuIiwid3JhcCIsImFmdGVyIiwiJHN0eWxlZFNlbGVjdCIsIm5leHQiLCJlcSIsIiRsaXN0IiwiaW5zZXJ0QWZ0ZXIiLCJyZWwiLCJ2YWwiLCJhcHBlbmRUbyIsIiRsaXN0SXRlbXMiLCJzdG9wUHJvcGFnYXRpb24iLCJhdHRyIl0sIm1hcHBpbmdzIjoibXBDQUtBLElBQUlBLFFBQVUsU0FBQ0MsR0FBeUIsSUFBakJDLEVBQWlCLEVBQUFDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFSLElBRTlCRixFQUFPSyxNQUFNQyxtQkFBcUIsMEJBQ2xDTixFQUFPSyxNQUFNRSxtQkFBcUJOLEVBQVcsS0FDN0NELEVBQU9LLE1BQU1HLE9BQVNSLEVBQU9TLGFBQWUsS0FDNUNULEVBQU9TLGFBQ1BULEVBQU9LLE1BQU1LLFNBQVcsU0FDeEJWLEVBQU9LLE1BQU1HLE9BQVMsRUFDdEJSLEVBQU9LLE1BQU1NLFdBQWEsRUFDMUJYLEVBQU9LLE1BQU1PLGNBQWdCLEVBQzdCWixFQUFPSyxNQUFNUSxVQUFZLEVBQ3pCYixFQUFPSyxNQUFNUyxhQUFlLEVBQzVCQyxPQUFPQyxXQUFZLFdBQ2JoQixFQUFPSyxNQUFNWSxRQUFVLE9BQ3ZCakIsRUFBT0ssTUFBTWEsZUFBZSxVQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsZUFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLGtCQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsY0FDNUJsQixFQUFPSyxNQUFNYSxlQUFlLGlCQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsWUFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLHVCQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsd0JBRS9CakIsSUFHRGtCLFVBQVksU0FBQ25CLEdBQXlCLElBQWpCQyxFQUFpQixFQUFBQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUixJQUVoQ0YsRUFBT0ssTUFBTWEsZUFBZSxXQUM1QixJQUFJRCxFQUFVRixPQUFPSyxpQkFBaUJwQixHQUFRaUIsUUFFOUNq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QixLQUFNNEUsRUFBTUUsU0FBUyxVQUFVSyxHQUFHbkcsR0FBR2dCLE9BQ3JDc0YsSUFBS1YsRUFBTUUsU0FBUyxVQUFVSyxHQUFHbkcsR0FBR3VHLFFBQ25DQyxTQUFTSixHQUdkLElBQUlLLEVBQWFMLEVBQU1OLFNBQVMsTUFFaENHLEVBQWN6RSxNQUFNLFNBQVN2QyxHQUMzQkEsRUFBRXlILGtCQUNGL0csRUFBRSw2QkFBNkJzQyxJQUFJNUMsTUFBTXNHLEtBQUssV0FDNUNoRyxFQUFFTixNQUFNOEMsWUFBWSxVQUFVK0QsS0FBSyxzQkFBc0I5SixRQUFRLE9BRW5FdUQsRUFBRU4sTUFBTXVFLFlBQVksVUFBVXNDLEtBQUssc0JBQXNCeEksWUFBWSxPQUd2RStJLEVBQVdqRixNQUFNLFNBQVN2QyxHQUN4QkEsRUFBRXlILGtCQUNGVCxFQUFjdkUsS0FBSyxRQUFRVixLQUFLckIsRUFBRU4sTUFBTTJCLFFBQVFtQixZQUFZLFVBQzVEeUQsRUFBTVcsSUFBSTVHLEVBQUVOLE1BQU1zSCxLQUFLLFFBQ3ZCUCxFQUFNaEssUUFBUSxPQUdoQnVELEVBQUU3QixVQUFVMEQsTUFBTSxXQUNoQnlFLEVBQWM5RCxZQUFZLFVBQzFCaUUsRUFBTWhLLFFBQVEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTY3JvbGwgdG8gdGhlIHRvcCBiZWZvcmUgdGhlIHBhZ2UgbG9hZHNcclxuLy8gd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuLy8gfVxyXG5cclxubGV0IHNsaWRlVXAgPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbmxldCBzbGlkZURvd24gPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XHJcbiAgbGV0IGRpc3BsYXkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXk7XHJcbiAgaWYgKGRpc3BsYXkgPT09ICdub25lJykgZGlzcGxheSA9ICdibG9jayc7XHJcbiAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gIGxldCBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gXCJoZWlnaHQsIG1hcmdpbiwgcGFkZGluZ1wiO1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcbiAgfSwgZHVyYXRpb24pO1xyXG59XHJcblxyXG52YXIgc2xpZGVUb2dnbGUgPSAodGFyZ2V0LCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xyXG4gIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgcmV0dXJuIHNsaWRlRG93bih0YXJnZXQsIGR1cmF0aW9uKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHNsaWRlVXAodGFyZ2V0LCBkdXJhdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gIC8vIFZhcmlhYmVsc1xyXG4gIGxldCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICBsZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcbiAgbGV0IHRlY2hub2xvZ3lDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlY2hub2xvZ3ktY2FyZCcpO1xyXG4gIGxldCB0ZWNobm9sb2d5Q2FyZEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JylcclxuICBsZXQgdGFiQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19faXRlbVwiKTtcclxuICBsZXQgdGFiSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19fdHJpZ2dlclwiKTtcclxuICBsZXQgdGFiRHJvcGRvd25UcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93bl9fdHJpZ2dlciAuZHJvcGRvd25fX3RyaWdnZXItdGV4dFwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93blwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJlYXRtZW50cyAuZHJvcGRvd25fX2xpc3RcIilcclxuXHJcbiAgLy8gU2Nyb2xsIHRvIGNvbnRhY3RzLWZvcm1cclxuICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyLWNvbnRhY3RzX19saW5rXCIpO1xyXG5cclxuICBmb3IgKGNvbnN0IGxpbmsgb2YgbGlua3MpIHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrSGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGlja0hhbmRsZXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaHJlZiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcclxuICAgIGNvbnN0IG9mZnNldFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaHJlZikub2Zmc2V0VG9wO1xyXG5cclxuICAgIHNjcm9sbCh7XHJcbiAgICAgIHRvcDogb2Zmc2V0VG9wIC0gMTAwLFxyXG4gICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBNYW5pcHVsYXRpb25zIHdpdGggaGVhZGVyIGNsYXNzZXMgb24gc2Nyb2xsXHJcbiAgbGV0IHNjcm9sbENoYW5nZSA9IDE7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcclxuICAgIGxldCBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgaWYgKHNjcm9sbCA+PSBzY3JvbGxDaGFuZ2UpIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1zY3JvbGwtdG9wXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtdG9wXCIpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC1kb3duXCIsIFwianMtbmF2LW9wZW5cIiwgXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFRhYnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYkl0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgIHRhYkl0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHJcbiAgICAgIHRhYkNvbnRlbnQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJJdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGFiQ29udGVudFtpXS5jbGFzc0xpc3QuYWRkKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB0YWJJdGVtW2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcblxyXG4gICAgICB0YWJEcm9wZG93blRyaWdnZXIudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYnNfX3RyaWdnZXIuanMtYWN0aXZlXCIpLnRleHRDb250ZW50XHJcbiAgICB9KTtcclxuICB9IFxyXG4gIFxyXG4gIGlmICh0YWJEcm9wZG93blRyaWdnZXIpIHtcclxuICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICB9XHJcbiAgLy8gQ3VzdG9tIHNjcm9sbGJhciBpbiB0b290aCB0YWJsZVxyXG4gIE92ZXJsYXlTY3JvbGxiYXJzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9vdGhcIiksIHt9KTtcclxuXHJcbiAgLy8gRmlsZXMgaW5wdXRcclxuICAvLyBsZXQgZmlsZXNUcmlnZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUnKTtcclxuICBsZXQgZmlsZXNUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxlc19fdGFibGUnKTtcclxuICBcclxuICAvLyBsZXQgdXBkYXRlRmlsZXNMaXN0ID0gKCkgPT4ge1xyXG4gIC8vICAgbGV0IGNoaWxkcmVuID0gXCJcIjtcclxuICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXNUcmlnZ2VyLmZpbGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgLy8gICAgIGNoaWxkcmVuICs9ICAnPGRpdiBjbGFzcz1cImZpbGVzX193cmFwcGVyXCI+JyArICc8ZGl2IGNsYXNzPVwiZmlsZXMtaXRlbVwiPicgKyAnPGkgY2xhc3M9XCJpY29uLWZpbGVcIj48L2k+JyArICc8c3BhbiBjbGFzcz1cImZpbGVzLWl0ZW1fX25hbWVcIj4nICsgZmlsZXNUcmlnZ2VyLmZpbGVzLml0ZW0oaSkubmFtZSArICc8L3NwYW4vPicgKyAnPGkgY2xhc3M9XCJmaWxlcy1pdGVtX19yZW1vdmUgaWNvbi10cmFzaC1jYW5cIiBvbmNsaWNrPVwicmV0dXJuIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1wiPjwvaT4nICsgJzwvZGl2PicgKyAnPC9kaXY+J1xyXG4gIC8vICAgfVxyXG4gIC8vICAgZmlsZXNUYWJsZS5pbm5lckhUTUwgPSBjaGlsZHJlbjtcclxuICAvLyAgIGlmIChjaGlsZHJlbi5sZW5ndGggPj0gMCkge1xyXG4gIC8vICAgICBmaWxlc1RhYmxlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcclxuICAvLyAgIH0gZWxzZSB7XHJcbiAgLy8gICAgIGZpbGVzVGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcbiAgLy8gaWYgKGZpbGVzVHJpZ2dlcikge1xyXG4gIC8vICAgZmlsZXNUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gIC8vICAgICB1cGRhdGVGaWxlc0xpc3QoKVxyXG4gIC8vICAgfSlcclxuICAvLyB9XHJcblxyXG4gIGNvbnN0IGR0ID0gbmV3IERhdGFUcmFuc2ZlcigpO1xyXG5cclxuICAkKFwiI2ZpbGVcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuZmlsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICBsZXQgZmlsZUJsb2MgPSAkKCc8ZGl2Lz4nLCB7Y2xhc3M6ICdmaWxlc19fd3JhcHBlcid9KSxcclxuICAgICAgICBmaWxlTmFtZSA9ICQoJzxmaWxlcy1pdGVtLz4nLCB7Y2xhc3M6ICduYW1lJywgdGV4dDogdGhpcy5maWxlcy5pdGVtKGkpLm5hbWV9KTtcclxuICAgICAgZmlsZUJsb2MuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiZmlsZXMtaXRlbVwiPjxpIGNsYXNzPVwiaWNvbi1maWxlXCI+PC9pPjxzcGFuIGNsYXNzPVwiZmlsZXMtaXRlbV9fbmFtZVwiPiR7dGhpcy5maWxlcy5pdGVtKGkpLm5hbWV9PC9zcGFuPjxpIGNsYXNzPVwiZmlsZXMtaXRlbV9fcmVtb3ZlIGljb24tdHJhc2gtY2FuXCI+PC9pPjxkaXY+PGRpdj5gKVxyXG4gICAgICAkKFwiLmZpbGVzX190YWJsZVwiKS5hcHBlbmQoZmlsZUJsb2MpO1xyXG4gICAgfTtcclxuICAgIGZvciAobGV0IGZpbGUgb2YgdGhpcy5maWxlcykge1xyXG4gICAgICBkdC5pdGVtcy5hZGQoZmlsZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpbGVzID0gZHQuZmlsZXM7XHJcblxyXG4gICAgaWYgKHRoaXMuZmlsZXMubGVuZ3RoID49IDApIHtcclxuICAgICAgZmlsZXNUYWJsZS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmaWxlc1RhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH1cclxuICBcclxuICAgICQoJy5maWxlcy1pdGVtX19yZW1vdmUnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICBsZXQgbmFtZSA9ICQodGhpcykucGFyZW50KCkuZmluZCgnLmZpbGVzLWl0ZW1fX25hbWUnKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmZpbGVzX193cmFwcGVyJykucmVtb3ZlKCk7XHJcbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkdC5pdGVtcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYobmFtZSA9PT0gZHQuaXRlbXNbaV0uZ2V0QXNGaWxlKCkubmFtZSl7XHJcbiAgICAgICAgICBkdC5pdGVtcy5yZW1vdmUoaSk7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUnKS5maWxlcyA9IGR0LmZpbGVzO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gTWVkaWEgOTkyID09PT09PlxyXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAvLyBPcGVuaW5nIGRlc2t0b3AgbWVudSB3aXRoIGJ1cmdlclxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtbmF2LW9wZW5cIikpIHtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LWNsb3NlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgdGVjaG5vbG9neSBhY2NvcmRpb25cclxuICAgICQoJy50ZWNobm9sb2d5X193cmFwcGVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikubm90KCQodGhpcykuY2xvc2VzdChcIi50ZWNobm9sb2d5X193cmFwcGVyXCIpKS5yZW1vdmVDbGFzcyhcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikuYWRkQ2xhc3MoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdqcy1hY3RpdmUnKSkge1xyXG4gICAgICAgICQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5ub3QoJCh0aGlzKS5maW5kKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JykpLnNsaWRlVXAoMzAwKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5zbGlkZURvd24oMzAwKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRlY2hub2xvZ3lDYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAvLyAgIHRlY2hub2xvZ3lDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgdGVjaG5vbG9neUNhcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgLy8gICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgLy8gICAgIH0pO1xyXG5cclxuICAgIC8vICAgICAvLyB0ZWNobm9sb2d5Q2FyZEJvZHkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgLy8gICAgIC8vICAgc2xpZGVVcChlbGVtZW50KVxyXG4gICAgLy8gICAgIC8vIH0pO1xyXG5cclxuICAgIC8vICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5jbGFzc0xpc3QuYWRkKCdqcy1hY3RpdmUnKTtcclxuXHJcbiAgICAvLyAgICAgLy8gQWRkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWRcclxuICAgIC8vICAgICBzbGlkZURvd24odGVjaG5vbG9neUNhcmRCb2R5W2ldLCAzMDApXHJcbiAgICAvLyAgIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcblxyXG4gICAgbGV0IGhvcml6b250YWxTY3JvbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9yaXpvbnRhbC1zY3JvbGwnKVxyXG5cclxuICAgIGlmIChob3Jpem9udGFsU2Nyb2xsKSB7XHJcbiAgICAgIC8vIEhvcml6b250YWwgc2Nyb2xsIGluIFRyZWF0bWVudHMgPT09PT0+XHJcbiAgICAgIGdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlcik7XHJcbiAgXHJcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gZ3NhcC51dGlscy50b0FycmF5KFwiLmhvcml6b250YWwtc2Nyb2xsXCIpO1xyXG4gICAgICBsZXQgbWF4V2lkdGggPSAwO1xyXG4gIFxyXG4gICAgICBjb25zdCBnZXRNYXhXaWR0aCA9ICgpID0+IHtcclxuICAgICAgICBtYXhXaWR0aCA9IDA7XHJcbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgbWF4V2lkdGggKz0gc2VjdGlvbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgZ2V0TWF4V2lkdGgoKTtcclxuICAgICAgU2Nyb2xsVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwicmVmcmVzaEluaXRcIiwgZ2V0TWF4V2lkdGgpO1xyXG4gIFxyXG4gICAgICBsZXQgdHJpZ2dlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJlYXRtZW50cycpO1xyXG4gIFxyXG4gICAgICBnc2FwLnRvKHNlY3Rpb25zLCB7XHJcbiAgICAgICAgeDogKCkgPT4gYC0ke21heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGh9YCxcclxuICAgICAgICBlYXNlOiBcIm5vbmVcIixcclxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XHJcbiAgICAgICAgICBzdGFydDogXCItMTIwcHggdG9wXCIsXHJcbiAgICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VySXRlbSxcclxuICAgICAgICAgIHBpbjogdHJ1ZSxcclxuICAgICAgICAgIHNjcnViOiB0cnVlLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiBgKz0ke21heFdpZHRofWAsXHJcbiAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2N0LCBpKSA9PiB7XHJcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xyXG4gICAgICAgICAgdHJpZ2dlcjogc2N0LFxyXG4gICAgICAgICAgc3RhcnQ6ICgpID0+ICd0b3AgdG9wLT0nICsgKHNjdC5vZmZzZXRMZWZ0IC0gd2luZG93LmlubmVyV2lkdGgvMikgKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiAnKz0nICsgc2N0Lm9mZnNldFdpZHRoICogKG1heFdpZHRoIC8gKG1heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpKSxcclxuICAgICAgICAgIHRvZ2dsZUNsYXNzOiB7dGFyZ2V0czogc2N0LCBjbGFzc05hbWU6IFwiYWN0aXZlXCJ9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIFRvZ2dsZSB2aXNpYmxlIGVsZW1lbnRzXHJcbiAgICBsZXQgc2hvd1RyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNob3dfX3RyaWdnZXJcIik7XHJcbiAgICBsZXQgc2hvd0l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNob3dfX2l0ZW1cIik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaG93VHJpZ2dlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzaG93VHJpZ2dlcltpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNob3dUcmlnZ2VyW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2pzLWFjdGl2ZScpXHJcblxyXG4gICAgICAgIGlmIChzaG93VHJpZ2dlcltpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1hY3RpdmVcIikpIHtcclxuICAgICAgICAgIHNob3dUcmlnZ2VyW2ldLnRleHRDb250ZW50ID0gJ1NlZSBsZXNzJ1xyXG4gICAgICAgICAgc2hvd0l0ZW0uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93VHJpZ2dlcltpXS50ZXh0Q29udGVudCA9ICdTZWUgYWxsJ1xyXG4gICAgICAgICAgc2hvd0l0ZW0uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgLy8gVHJlYXRtZW50cyBwYWdlIHRhYnMgbmF2aWdhdGlvblxyXG4gICAgaWYgKHRyZWF0bWVudHNEcm9wZG93biAmJiB0cmVhdG1lbnRzRHJvcGRvd25MaXN0KSB7XHJcbiAgICAgIGxldCBvZmZzZXRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19saXN0Jykub2Zmc2V0SGVpZ2h0XHJcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tdHJlYXRtZW50cy1kcm9wZG93bi1vZmZzZXRcIiwgb2Zmc2V0SXRlbSArIFwicHhcIilcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IG9mZnNldEl0ZW0gKyA2NCApIHtcclxuICAgICAgICAgIHRyZWF0bWVudHNEcm9wZG93bi5jbGFzc0xpc3QuYWRkKFwianMtc2Nyb2xsLWRvd25cIik7XHJcbiAgICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd25MaXN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmVhdG1lbnRzJykuY2xhc3NMaXN0LmFkZChcIm9mZnNldC10b3BcIilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgICAgIHRyZWF0bWVudHNEcm9wZG93bkxpc3Quc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmVhdG1lbnRzJykuY2xhc3NMaXN0LnJlbW92ZShcIm9mZnNldC10b3BcIilcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmICh0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtc2Nyb2xsLWRvd25cIikpIHtcclxuICAgICAgICAgIHNsaWRlVG9nZ2xlKHRyZWF0bWVudHNEcm9wZG93bkxpc3QsIDMwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG51bGxcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBPcGVuaW5nIG1vYmlsZSBtZW51IHdpdGggYnVyZ2VyXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1uYXYtb3BlblwiKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwianMtbG9ja1wiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgdGVjaG5vbG9neSBhY2NvcmRpb25zICEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISFcclxuICAgIC8vICQoJy50ZWNobm9sb2d5X193cmFwcGVyIC50ZWNobm9sb2d5LWNhcmQnKS5ub3QoJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXIuc2Vjb25kYXJ5IC50ZWNobm9sb2d5LWNhcmQnKSkucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZScpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlY2hub2xvZ3lDYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRlY2hub2xvZ3lDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGNsYXNzIGZyb20gYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgdGVjaG5vbG9neUNhcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZFxyXG4gICAgICAgIHRlY2hub2xvZ3lDYXJkW2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsb2NrIHNsaWRlciAnVHJlYXRtZW50cydcclxuICAgIGNvbnN0IHNsaWRlclRyZWF0bWVudHMgPSBuZXcgU3dpcGVyKCcudHJlYXRtZW50cy1zbGlkZXInLCB7XHJcbiAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICBuZXh0RWw6IFwiLnRyZWF0bWVudHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgICBwcmV2RWw6IFwiLnRyZWF0bWVudHMtYnV0dG9uLXByZXZcIixcclxuICAgICAgfSxcclxuICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgIGVsOiBcIi50cmVhdG1lbnRzLXBhZ2luYXRpb25cIixcclxuICAgICAgfSxcclxuICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICA3Njg6IHtcclxuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnUHJhY3RpY2VzJ1xyXG4gIGNvbnN0IHNsaWRlclByYWN0aWNlcyA9IG5ldyBTd2lwZXIoJy5wcmFjdGljZXMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogNDAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIucHJhY3RpY2VzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIucHJhY3RpY2VzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIucHJhY3RpY2VzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnVGVzdGltb25pYWxzJ1xyXG4gIGNvbnN0IHNsaWRlclRlc3RpbW9uaWFscyA9IG5ldyBTd2lwZXIoJy50ZXN0aW1vbmlhbHMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBsb29wOiB0cnVlLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnRlc3RpbW9uaWFscy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnRlc3RpbW9uaWFscy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnRlc3RpbW9uaWFscy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgICAgOTkyOiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdDYXNlcydcclxuICBjb25zdCBzbGlkZXJDYXNlcyA9IG5ldyBTd2lwZXIoJy5jYXNlcy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5jYXNlcy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLmNhc2VzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuY2FzZXMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdTb2NpYWxzJ1xyXG4gIGNvbnN0IHNsaWRlclNvY2lhbHMgPSBuZXcgU3dpcGVyKCcuc29jaWFsc19fc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuc29jaWFscy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnNvY2lhbHMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5zb2NpYWxzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgICA5OTI6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcbn0iLCIvLyBBdXRvIHNpemUgdGV4dGFyZWEgPT09PT0+XHJcbnZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcblxyXG5pZiAodGV4dGFyZWEpIHtcclxuICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXV0b3NpemVUZXh0YXJlYSk7XHJcbn0gZWxzZSB7XHJcbiAgbnVsbFxyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvc2l6ZVRleHRhcmVhKCl7XHJcblx0dmFyIGVsID0gdGhpcztcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDphdXRvOyBwYWRkaW5nOjAnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICctbW96LWJveC1zaXppbmc6Y29udGVudC1ib3gnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6JyArIGVsLnNjcm9sbEhlaWdodCArICdweCc7XHJcblx0fSwwKTtcclxufVxyXG5cclxuLy8gQ3VzdG9tIHNlbGVjdCA9PT09PT5cclxuJCgnc2VsZWN0JykuZWFjaChmdW5jdGlvbigpe1xyXG4gIHZhciAkdGhpcyA9ICQodGhpcyksIG51bWJlck9mT3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpLmxlbmd0aDtcclxuXHJcbiAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdF9faGlkZGVuJyk7IFxyXG4gICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3RcIj48L2Rpdj4nKTtcclxuICAkdGhpcy5hZnRlcignPGRpdiBjbGFzcz1cInNlbGVjdF9fc3R5bGVkXCI+PC9kaXY+Jyk7XHJcblxyXG4gIHZhciAkc3R5bGVkU2VsZWN0ID0gJHRoaXMubmV4dCgnZGl2LnNlbGVjdF9fc3R5bGVkJyk7XHJcbiAgJHN0eWxlZFNlbGVjdC5hcHBlbmQoJzxzcGFuPjwvc3Bhbj48aSBjbGFzcz1cImljb24tYXJyb3ctZHJvcGRvd25cIj48L2k+JylcclxuICAkc3R5bGVkU2VsZWN0LmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcSgwKS50ZXh0KCkpO1xyXG5cclxuICB2YXIgJGxpc3QgPSAkKCc8dWwgLz4nLCB7XHJcbiAgICAnY2xhc3MnOiAnc2VsZWN0X19vcHRpb25zJ1xyXG4gIH0pLmluc2VydEFmdGVyKCRzdHlsZWRTZWxlY3QpO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mT3B0aW9uczsgaSsrKSB7XHJcbiAgICAkKCc8bGkgLz4nLCB7XHJcbiAgICAgIHRleHQ6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS50ZXh0KCksXHJcbiAgICAgIHJlbDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnZhbCgpXHJcbiAgICB9KS5hcHBlbmRUbygkbGlzdCk7XHJcbiAgfVxyXG5cclxuICB2YXIgJGxpc3RJdGVtcyA9ICRsaXN0LmNoaWxkcmVuKCdsaScpO1xyXG5cclxuICAkc3R5bGVkU2VsZWN0LmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAkKCdkaXYuc2VsZWN0X19zdHlsZWQuYWN0aXZlJykubm90KHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0X19vcHRpb25zJykuc2xpZGVVcCgzMDApO1xyXG4gICAgfSk7XHJcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3RfX29wdGlvbnMnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gIH0pO1xyXG5cclxuICAkbGlzdEl0ZW1zLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAkc3R5bGVkU2VsZWN0LmZpbmQoJ3NwYW4nKS50ZXh0KCQodGhpcykudGV4dCgpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkdGhpcy52YWwoJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG4gICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJHN0eWxlZFNlbGVjdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG59KTsiXX0=